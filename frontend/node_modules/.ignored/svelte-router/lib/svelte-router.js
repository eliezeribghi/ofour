!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SvelteRouter=e()}(this,function(){"use strict";function t(){}function e(t){for(var e,n,r=1,a=arguments.length;r<a;r++)for(e in n=arguments[r])t[e]=n[e];return t}function n(){return Object.create(null)}function r(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function a(t,e,n,r,a){for(var o in e)if(n[o]){var i=r[o],s=a[o],c=e[o];if(c)for(var u=0;u<c.length;u+=1){var h=c[u];h.__calling||(h.__calling=!0,h.call(t,i,s),h.__calling=!1)}}}function o(t){for(;t&&t.length;)t.shift()()}var i={destroy:r,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:function(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,o(this.root._beforecreate),o(this.root._oncreate),o(this.root._aftercreate),this.root._lock=!1)},teardown:r,_recompute:t,_set:function(t){var n=this._state,r={},o=!1;for(var i in t)this._differs(t[i],n[i])&&(r[i]=o=!0);o&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(a(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),a(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t,e){return t(e={exports:{}},e.exports),e.exports}var u=function(t,e,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var a=2;a<r;a++)n[a-2]=arguments[a];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(t){}}},h=function(t,e,n,r,a,o,i,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,o,i,s],h=0;(c=new Error(e.replace(/%s/g,function(){return u[h++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}};function f(t){return"/"===t.charAt(0)}function l(t,e){for(var n=e,r=n+1,a=t.length;r<a;n+=1,r+=1)t[n]=t[r];t.pop()}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],a=t&&f(t),o=e&&f(e),i=a||o;if(t&&f(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var c=r[r.length-1];s="."===c||".."===c||""===c}else s=!1;for(var u=0,h=r.length;h>=0;h--){var d=r[h];"."===d?l(r,h):".."===d?(l(r,h),u++):u&&(l(r,h),u--)}if(!i)for(;u--;u)r.unshift("..");!i||""===r[0]||r[0]&&f(r[0])||r.unshift("");var v=r.join("/");return s&&"/"!==v.substr(-1)&&(v+="/"),v}var v=Object.freeze({default:d}),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function g(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return g(t,e[n])});var n=void 0===t?"undefined":p(t);if(n!==(void 0===e?"undefined":p(e)))return!1;if("object"===n){var r=t.valueOf(),a=e.valueOf();if(r!==t||a!==e)return g(r,a);var o=Object.keys(t),i=Object.keys(e);return o.length===i.length&&o.every(function(n){return g(t[n],e[n])})}return!1}var m=Object.freeze({default:g}),_=c(function(t,e){e.__esModule=!0;e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var n=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return n(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",a=e.indexOf("#");-1!==a&&(r=e.substr(a),e=e.substr(0,a));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,a=e||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}});s(_);_.addLeadingSlash,_.stripLeadingSlash,_.hasBasename,_.stripBasename,_.stripTrailingSlash,_.parsePath,_.createPath;var y=v&&d||v,w=m&&g||m,b=c(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=o(y),a=o(w);function o(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,a,o){var i=void 0;"string"==typeof t?(i=(0,_.parsePath)(t)).state=e:(void 0===(i=n({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return a&&(i.key=a),o?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=(0,r.default)(i.pathname,o.pathname)):i.pathname=o.pathname:i.pathname||(i.pathname="/"),i},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,a.default)(t.state,e.state)}});s(b);b.locationsAreEqual,b.createLocation;var P=c(function(t,e){e.__esModule=!0;var n,r=(n=u)&&n.__esModule?n:{default:n};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,a,o){if(null!=t){var i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof a?a(i,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==i)}else o(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}});s(P);var O=c(function(t,e){e.__esModule=!0;e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});s(O);O.canUseDOM,O.addEventListener,O.removeEventListener,O.getConfirmation,O.supportsHistory,O.supportsPopStateOnHashChange,O.supportsGoWithoutReloadUsingHash,O.isExtraneousPopstateEvent;var E=s(c(function(t,e){e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=i(u),a=i(h),o=i(P);function i(t){return t&&t.__esModule?t:{default:t}}var s={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,_.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:_.stripLeadingSlash,decodePath:_.addLeadingSlash},slash:{encodePath:_.addLeadingSlash,decodePath:_.addLeadingSlash}},c=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},f=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(O.canUseDOM,"Hash history needs a DOM");var e=window.history,i=(0,O.supportsGoWithoutReloadUsingHash)(),u=t.getUserConfirmation,h=void 0===u?O.getConfirmation:u,l=t.hashType,d=void 0===l?"slash":l,v=t.basename?(0,_.stripTrailingSlash)((0,_.addLeadingSlash)(t.basename)):"",p=s[d],g=p.encodePath,m=p.decodePath,y=function(){var t=m(c());return(0,r.default)(!v||(0,_.hasBasename)(t,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+v+'".'),v&&(t=(0,_.stripBasename)(t,v)),(0,b.createLocation)(t)},w=(0,o.default)(),P=function(t){n(q,t),q.length=e.length,w.notifyListeners(q.location,q.action)},E=!1,A=null,L=function(){var t=c(),e=g(t);if(t!==e)f(e);else{var n=y(),r=q.location;if(!E&&(0,b.locationsAreEqual)(r,n))return;if(A===(0,_.createPath)(n))return;A=null,x(n)}},x=function(t){E?(E=!1,P()):w.confirmTransitionTo(t,"POP",h,function(e){e?P({action:"POP",location:t}):S(t)})},S=function(t){var e=q.location,n=R.lastIndexOf((0,_.createPath)(e));-1===n&&(n=0);var r=R.lastIndexOf((0,_.createPath)(t));-1===r&&(r=0);var a=n-r;a&&(E=!0,H(a))},C=c(),j=g(C);C!==j&&f(j);var k=y(),R=[(0,_.createPath)(k)],H=function(t){(0,r.default)(i,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},T=0,M=function(t){1===(T+=t)?(0,O.addEventListener)(window,"hashchange",L):0===T&&(0,O.removeEventListener)(window,"hashchange",L)},U=!1,q={length:e.length,action:"POP",location:k,createHref:function(t){return"#"+g(v+(0,_.createPath)(t))},push:function(t,e){(0,r.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,b.createLocation)(t,void 0,void 0,q.location);w.confirmTransitionTo(n,"PUSH",h,function(t){if(t){var e=(0,_.createPath)(n),a=g(v+e);if(c()!==a){A=e,function(t){window.location.hash=t}(a);var o=R.lastIndexOf((0,_.createPath)(q.location)),i=R.slice(0,-1===o?0:o+1);i.push(e),R=i,P({action:"PUSH",location:n})}else(0,r.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),P()}})},replace:function(t,e){(0,r.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,b.createLocation)(t,void 0,void 0,q.location);w.confirmTransitionTo(n,"REPLACE",h,function(t){if(t){var e=(0,_.createPath)(n),r=g(v+e);c()!==r&&(A=e,f(r));var a=R.indexOf((0,_.createPath)(q.location));-1!==a&&(R[a]=e),P({action:"REPLACE",location:n})}})},go:H,goBack:function(){return H(-1)},goForward:function(){return H(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=w.setPrompt(t);return U||(M(1),U=!0),function(){return U&&(U=!1,M(-1)),e()}},listen:function(t){var e=w.appendListener(t);return M(1),function(){M(-1),e()}}};return q}}))(),A="router-link-active";var L={navigate:function(t,e){(t&&t.preventDefault&&t.preventDefault(),e)&&(E.location.pathname!==e&&(this.get("replace")?E.replace(e):E.push(e)))},setActivedClass:function(t){var e=t.pathname===this.get("to");this.set({active:e})}};function x(){this.get("event")()}function S(t,e){var n,r,a,o=t._slotted.default;function i(e){var n=t.get();t.navigate(e,n.to)}return{c:function(){var t;t="a",n=document.createElement(t),this.h()},h:function(){var t,o;n.href=r=""+e.basePath+e.to,n.className=a=e.class+" "+(e.active?e.activeClass:""),t="click",o=i,n.addEventListener(t,o,!1)},m:function(t,e){!function(t,e,n){e.insertBefore(t,n)}(n,t,e),o&&function(t,e){e.appendChild(t)}(o,n)},p:function(t,e){(t.basePath||t.to)&&r!==(r=""+e.basePath+e.to)&&(n.href=r),(t.class||t.active||t.activeClass)&&a!==(a=e.class+" "+(e.active?e.activeClass:""))&&(n.className=a)},u:function(){var t;(t=n).parentNode.removeChild(t),o&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(n,o)},d:function(){var t,e;t="click",e=i,n.removeEventListener(t,e,!1)}}}function C(t){!function(t,e){t._observers={pre:n(),post:n()},t._handlers=n(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e({replace:!1,to:"/",basePath:"#",active:!1,class:"",activeClass:A,event:null},t.data),this._handlers.destroy=[x],this._slotted=t.slots||{};var r=function(){this.setActivedClass(E.location),this.set({event:E.listen(this.setActivedClass.bind(this))})}.bind(this);t.root||(this._oncreate=[]),this.slots={},this._fragment=S(this,this._state),this.root._oncreate.push(r),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),o(this._oncreate))}e(C.prototype,L,i);var j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k=function(t){return t.map(function(t){return null!==t.match(new RegExp(":[a-zA-Z]+"))?"([a-zA-Z0-9]+)":t}).join("\\/")},R=function(t,e){var n={};return t.filter(function(t){return null!==t.match(new RegExp(":[a-zA-Z]+"))}).map(function(t){return t.match(new RegExp(":([a-zA-Z]+)"))[1]}).forEach(function(t,r){var a=r+1;n[t]=e[a]}),n},H=function(t,e,n,r){var a=t[e],o=a.Component,i=a.props;o||(o=t[e]);var s={data:{path:r}};return i=i||{},Object.prototype.hasOwnProperty.call(i,"data")&&(i.data.path=r,s={}),new o(j({target:n},i,s))},T=function(t){var e=void 0,n=void 0,r=void 0,a=function(n){var a=!1;for(var o in r&&(r.destroy(),r=null),t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=o.split("/"),s=k(i),c=n.pathname.match(new RegExp("^"+s+"$"));if(null!==c){var u=R(i,c);r=H(t,o,e,u),a=!0;break}}!a&&t.default&&(r=H(t,"default",e,{}))};return{create:function(t){e="string"==typeof t?document.querySelector(t):t,n=E.listen(a),a(E.location)},destroy:function(){n&&(n(),n=void 0)}}};return T.push=function(t){E.push(t)},T.replace=function(t){E.replace(t)},T.go=function(t){E.go(t)},T.listen=function(t){E.listen(t)},{createRouter:T,RouterLink:C}});
